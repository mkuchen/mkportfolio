$(function(){function u(){}Modernizr.svg||(document.createElement("svg"),$('img[src*="svg"]').attr("src",function(){return $(this).attr("src").replace(".svg",".png")}));var e=!1;window.location.hash&&(e=!0);var t=navigator.userAgent.match(/(iPad|iPhone|iPod)/i)?!0:!1,n=$(".main");Modernizr.history&&($.address.init(function(e){var t=e.value,n=$('header a[href="'+t+'"]');e.value!="/contact"&&e.value!="/contact/"&&$("body").attr("data-last-page",t),o(n);if(t=="/contact"||t=="/contact/")$("body").addClass("home"),$(".main").load("/ .main > *",function(e){})}),$("header a, .hero .btn, footer .left a, .close").address(function(){return $(this).attr("href").replace(/^#/,"")}),$.address.change(function(t){if(e||t.value=="/contact"||t.value=="/contact/"){var n=t.value,u=$('header a[href="'+n+'"]');o(u),$("header a").removeClass("active"),u.addClass("active"),n=="/contact"||n=="/contact/"?i(n):$("body").attr("data-last-page")!=n?r(n):s()}e=!0})),!Modernizr.history&&$("body").hasClass("contact")&&($("body").addClass("home"),$(".main").load("/ .main > *",function(e){i("/contact")}));var r=function(e){$("body").attr("data-last-page",e);var t=window.innerHeight,r=$("header").outerHeight(),i=$(".main").outerHeight(!0),s=$(window).scrollTop();s==0,$(".main").addClass("js--animate").css({top:i*-1}),setTimeout(function(){n.removeClass("js--animate").css({top:t}),n.children().remove(),$("body").attr("class",""),$("body").attr("style",""),$("header").attr("style",""),$('<div class="loading"><div class="loading-inner"><img src="/images/icons/jacques.svg" alt="Loading" height="162" width="162" /><div class="shadow"></div><span>Loading...</span></div></div>').appendTo("body"),n.load(e+" .main > *",function(t,n,r){$(".loading").fadeOut(250,function(){$(this).remove()});var i=new Object;i.title=t.match("<title>(.*?)</title>")[1],i.classes=/body([^>]*)class=(["']+)([^"']*)(["']+)/gi.exec(t.substring(t.indexOf("<body"),t.indexOf("</body>")+7))[3],i.nav_item=$('header a[href="'+e+'"]'),document.title=i.title,$("body").addClass(i.classes),$(".main").addClass("js--animate").css({top:0}),setTimeout(function(){$("body").addClass("show"),$(".main").removeClass("js--animate"),$(".main").removeAttr("style")},750)})},750)},i=function(e){$(".modal").load(e+" .modal-inner",function(e){Modernizr.svg||(document.createElement("svg"),$('img[src*="svg"]').attr("src",function(){return $(this).attr("src").replace(".svg",".png")}));var t=new Object;t.title=e.match("<title>(.*?)</title>")[1],t.classes=/body([^>]*)class=(["']+)([^"']*)(["']+)/gi.exec(e.substring(e.indexOf("<body"),e.indexOf("</body>")+7))[3],document.title=t.title,$("body").addClass(t.classes),setTimeout(function(){$(".modal").addClass("show-modal");var e=new Object;e.first=$(".modal .first"),e.second=$(".modal .second"),e.firstHeight=e.first.outerHeight(),e.secondHeight=e.second.outerHeight(),e.first.css({"margin-top":e.firstHeight/-2}),e.second.css({"margin-top":e.secondHeight/-2})},500),$(".close").attr("href",$("body").attr("data-last-page"))})},s=function(){$(".modal").addClass("remove-modal"),setTimeout(function(){$("body").removeClass("contact"),$(".modal").removeClass("show-modal remove-modal"),$(".modal-inner").remove()},500)},o=function(e){$("header a").removeClass("active"),e.addClass("active")};$(document).on("click",".close",function(e){$.address.value($(this).attr("href")),$.ajax({url:$(this).attr("href"),success:function(e){document.title=$(e).filter("title").text()}})});var a=0;$(window).scroll(function(){var e=$(this).scrollTop();if(!t){$("body").hasClass("home")&&($(".globe").css({transform:"translateY("+e/50*-1+"%)"}),e>a);if($("body").hasClass("work")){var n=new Object;n.st=e,e<=464&&$(".work .hero h1").css({"letter-spacing":e/14.4+"px"})}}a=e}),$(window).resize(function(){if($(".modal-inner").length){var e=new Object;e.first=$(".modal .first"),e.second=$(".modal .second"),e.firstHeight=e.first.outerHeight(),e.secondHeight=e.second.outerHeight(),e.first.css({"margin-top":e.firstHeight/-2}),e.second.css({"margin-top":e.secondHeight/-2})}}),$(document).on("click",".process-nav-item",function(e){var t=new Object;t.root=$(this),t.step=t.root.attr("data-step"),t.margin=t.root.attr("data-margin"),t.root.hasClass("process-nav-item-active")||($("body").addClass("can-do-process-nav"),$(".process-nav-item-active").removeClass("process-nav-item-active"),$(this).addClass("process-nav-item-active"),$(".step-remove").removeClass("step-remove"),$(".step-active").removeClass("step-active").addClass("step-remove"),$(".step-"+t.step).addClass("step-active"),$(".processes-wrap").css({"margin-left":t.margin})),e.preventDefault()}),$(window).load(function(){$("body").addClass("show")})});